# Matt Segar's Blog

A lightweight static blog using Markdown files converted to HTML.

## Features

- Simple Markdown-to-HTML conversion
- No heavy frameworks or CMS
- Fast-loading static pages
- Good SEO practices

## Project Structure

```
your-website/
├── assets/
│   ├── css/
│   ├── js/
│   └── images/
├── blog/
│   ├── index.html           (blog listing page)
│   ├── index-template.html  (template for index generation)
│   ├── posts/               (generated HTML files)
│   │   └── r-plumber.html   (example of generated post)
│   └── template.html        (blog post HTML template)
├── content/
│   └── posts/
│       ├── r-plumber.md     (markdown source files)
│       └── other-posts.md
├── scripts/
│   └── build-blog.js        (build script)
└── index.html               (main site homepage)
```

## Development

### Prerequisites

- Node.js (v14 or newer)

### Setup

1. Clone this repository
2. Install dependencies: `npm install`
3. Run the build script: `npm run build`

## Updating Your Blog

### Making Changes to HTML/CSS Files

When you make changes to HTML, CSS, or JavaScript files that are not generated by the build process:

1. Make your changes to the files locally
2. Add the changed files to staging:
   ```bash
   git add path/to/changed/files
   ```
   Or to add all changed files:
   ```bash
   git add .
   ```
3. Commit your changes:
   ```bash
   git commit -m "Brief description of your changes"
   ```
4. Push to GitHub:
   ```bash
   git push origin main
   ```
5. GitHub Actions will automatically deploy your changes

### Adding a New Blog Post

1. Create a new Markdown file in the `content/posts/` directory:
   ```bash
   touch content/posts/your-new-post.md
   ```

2. Add frontmatter and content to your Markdown file:
   ```markdown
   ---
   title: Your Post Title
   description: Brief description of your post
   date: YYYY-MM-DD
   img: ../../assets/images/your-image.png
   categories: [Category1, Category2]
   ---

   Your post content goes here...
   ```

3. Run the build script to generate HTML:
   ```bash
   npm run build
   ```
   
   > **Note:** You may see deprecation warnings from marked.js about mangle and headerIds parameters. These are just warnings and won't affect your build output.

4. Add all changed files to git:
   ```bash
   git add .
   ```

5. Commit your changes:
   ```bash
   git commit -m "Add new blog post: Your Post Title"
   ```

6. Push to GitHub:
   ```bash
   git push origin main
   ```

7. GitHub Actions will automatically deploy your changes

### Editing an Existing Blog Post

1. Edit the Markdown file in `content/posts/`
2. Run the build script:
   ```bash
   npm run build
   ```
3. Add and commit the changes:
   ```bash
   git add .
   git commit -m "Update blog post: Post Title"
   ```
4. Push to GitHub:
   ```bash
   git push origin main
   ```

### Adding Images

1. Add the image file to `assets/images/`:
   ```bash
   # Copy your image to the assets/images directory
   cp path/to/your/image.png assets/images/
   ```

2. Reference the image in your blog post using relative paths:
   ```markdown
   ![Image Alt Text](../../assets/images/your-image.png)
   ```

3. Run the build script, commit, and push as usual:
   ```bash
   npm run build
   git add .
   git commit -m "Add new image and update blog"
   git push origin main
   ```

### Adding Markdown Content

When writing blog posts in Markdown, you can use:

#### Basic Markdown

```markdown
# Heading 1
## Heading 2
### Heading 3

Paragraphs are separated by a blank line.

*Italic text* or _italic text_
**Bold text** or __bold text__
`Inline code` in a sentence

[Link text](https://example.com)
```

#### Images

```markdown
![Alt text](../../assets/images/image-name.png)
```

#### Code Blocks

````markdown
```python
def hello_world():
    print("Hello, world!")
```
````

#### Lists

```markdown
- Item 1
- Item 2
  - Nested item
  - Another nested item
- Item 3

1. First item
2. Second item
3. Third item
```

#### Blockquotes

```markdown
> This is a blockquote.
> It can span multiple lines.
```

#### HTML in Markdown

You can also use HTML when you need more control:

```markdown
<figure>
  <img src="../../assets/images/example.png" alt="Example image">
  <figcaption>Figure 1: This is a caption</figcaption>
</figure>
```

### Troubleshooting Common Issues

- **Push rejected due to remote changes**:
  ```bash
  # For simple cases:
  git pull origin main
  
  # If you encounter "divergent branches" error:
  git pull --rebase origin main  # Applies your changes on top of remote changes
  
  # After resolving any conflicts:
  git push origin main
  ```

- **Divergent branches error**:
  ```bash
  # Option 1 (recommended for cleaner history):
  git pull --rebase origin main
  
  # Option 2 (creates a merge commit):
  git config pull.rebase false
  git pull origin main
  ```

- **Merge conflicts**:
  1. Resolve conflicts in the affected files
  2. For rebase conflicts:
     ```bash
     git add .
     git rebase --continue
     ```
  3. For merge conflicts:
     ```bash
     git add .
     git commit -m "Resolve merge conflicts"
     ```
  4. Push changes: `git push origin main`

- **Images not showing**:
  - Check image paths in Markdown (should be `../../assets/images/` from posts)
  - Verify the image exists in the correct location
  - Rebuild the blog after adding new images

- **Marked.js deprecation warnings**:
  - These warnings about `mangle` and `headerIds` parameters are expected with current dependencies
  - They don't affect functionality and can be safely ignored
  - To suppress them, you could install the suggested packages:
    ```bash
    npm install marked-mangle marked-gfm-heading-id
    ```

### Full Update Workflow (Common Pattern)

```bash
# 1. Make your changes locally

# 2. Run the build script (for blog post changes)
npm run build

# 3. Stage changes
git add .

# 4. Commit changes
git commit -m "Descriptive message about your changes"

# 5. Pull any remote changes (with rebase to avoid merge commits)
git pull --rebase origin main

# 6. Push to GitHub
git push origin main
```

## Deployment

This blog is automatically deployed using GitHub Pages through GitHub Actions. The workflow is defined in `.github/workflows/build.yml`.

- Every push to the `main` branch triggers a new build
- The build process runs the npm script to convert Markdown to HTML
- The site is automatically deployed to GitHub Pages at https://msegar.github.io/

## License

MIT