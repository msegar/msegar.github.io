<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How I Boosted My Next.js Landing Page from 76 to 96 on Lighthouse - Matt Segar</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/favicon_io/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="assets/favicon_io/favicon.ico" type="image/x-icon">
    
    <!-- Primary Meta Tags -->
    <meta name="description" content="A 50KB animation library was blocking my landing page render. Here's how I replaced it with CSS and gained 20 Lighthouse points in the process.">
    <meta name="author" content="Matt Segar">
    <meta name="keywords" content="page, lighthouse, landing, animations, users">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://segar.me/blog/posts/nextjs_optimization.html">
    <meta property="og:title" content="How I Boosted My Next.js Landing Page from 76 to 96 on Lighthouse - Matt Segar">
    <meta property="og:description" content="A 50KB animation library was blocking my landing page render. Here's how I replaced it with CSS and gained 20 Lighthouse points in the process.">
    <meta property="og:image" content="../assets/images/nextjs_optimization.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://segar.me/blog/posts/nextjs_optimization.html">
    <meta property="twitter:title" content="How I Boosted My Next.js Landing Page from 76 to 96 on Lighthouse - Matt Segar">
    <meta property="twitter:description" content="A 50KB animation library was blocking my landing page render. Here's how I replaced it with CSS and gained 20 Lighthouse points in the process.">
    <meta property="twitter:image" content="../assets/images/nextjs_optimization.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://segar.me/blog/posts/nextjs_optimization.html">
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "How I Boosted My Next.js Landing Page from 76 to 96 on Lighthouse",
      "description": "A 50KB animation library was blocking my landing page render. Here's how I replaced it with CSS and gained 20 Lighthouse points in the process.",
      "image": "../assets/images/nextjs_optimization.png",
      "author": {
        "@type": "Person",
        "name": "Matt Segar"
      },
      "publisher": {
        "@type": "Person",
        "name": "Matt Segar",
        "logo": {
          "@type": "ImageObject",
          "url": "https://segar.me/assets/images/logo_name.webp"
        }
      },
      "datePublished": "2026-02-01T00:00:00.000Z",
      "dateModified": "2026-02-01T00:00:00.000Z",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://segar.me/blog/posts/nextjs_optimization.html"
      },
      "keywords": "page, lighthouse, landing, animations, users"
    }
    </script>
    
    <link rel="stylesheet" href="../../assets/css/normalize.css">
    <link rel="stylesheet" href="../../assets/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* Blog post specific styles */
        .post-header {
            margin-bottom: 40px;
        }
        
        .post-title {
            font-size: 2.4rem;
            margin-bottom: 10px;
        }
        
        .post-meta {
            font-size: 0.9rem;
            color: var(--light-text);
            margin-bottom: 20px;
        }
        
        .post-content {
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .post-content h2 {
            margin-top: 40px;
            margin-bottom: 20px;
        }
        
        .post-content p {
            margin-bottom: 20px;
        }
        
        .post-content img {
            max-width: 100%;
            height: auto;
            margin: 30px 0;
            border-radius: 5px;
        }
        
        .post-content pre {
            background-color: var(--light-background);
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        
        .post-content code {
            font-family: monospace;
            background-color: var(--light-background);
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .post-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
        }
        
        .post-nav a {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 3px;
            text-decoration: none;
        }

    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N9RJDGM699"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N9RJDGM699');
    </script>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html" class="logo-link">
                    <img src="../../assets/images/logo_color.webp" alt="Matt Segar Logo" class="logo-image light-logo" width="40" height="40">
                    <img src="../../assets/images/logo_dark.webp" alt="Matt Segar Logo" class="logo-image dark-logo" width="40" height="40">
                    <h1>Matt Segar</h1>
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="../../index.html">Home</a></li>
                    <li><a href="../../cv.html">CV</a></li>
                    <li><a href="../index.html" class="active">Blog</a></li>
                    <li class="dropdown">
                        <a class="nav-link">Innovations</a>
                        <div class="dropdown-content">
                            <a href="../../book.html">ML Book</a>
                            <a href="../../job-search-book.html">Physician's Job Search Playbook</a>
                            <a href="../../valabformatter/index.html">CPRS Lab Formatter</a>
                        </div>
                    </li>
                    <li class="theme-toggle">
                        <button id="theme-toggle-btn" aria-label="Toggle dark mode">
                            <span class="light-icon">‚òÄÔ∏è</span>
                            <span class="dark-icon">üåô</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="container">
            <article class="post-content">
                <header class="post-header">
                    <h1 class="post-title">How I Boosted My Next.js Landing Page from 76 to 96 on Lighthouse</h1>
                    <div class="post-meta">
                        <time datetime="2026-02-01T00:00:00.000Z">February 1, 2026</time>
                    </div>
                </header>
                
                <div class="post-body">
                    <p>ManuscriptMind&#39;s landing page felt fast. Animations were smooth, the layout was responsive, and users didn&#39;t complain. But when I ran Lighthouse, the performance score came back at 76. Not terrible, but not great either.</p>
<p>I care about performance. A slow landing page means lost users, worse SEO rankings, and ultimately fewer people discovering the product. So I dug in to figure out what was holding things back.</p>
<p>What I found surprised me: the animations that made the page feel polished were the same ones making it slow.</p>
<h2 id="the-lighthouse-report">The Lighthouse Report</h2>
<p>Lighthouse gave me a performance score of 76 and an accessibility score of 80. The performance issues were clear:</p>
<ul>
<li>High document request latency</li>
<li>Render-blocking JavaScript</li>
<li>Long JavaScript execution time</li>
<li>Excessive main-thread work</li>
</ul>
<p>The accessibility issues were more varied:</p>
<ul>
<li>Buttons without accessible names</li>
<li>Low contrast text colors</li>
<li>Skipped heading levels</li>
<li>Small touch targets</li>
<li>Links that only used color for distinction</li>
</ul>
<p>Both needed fixing, but performance was the bigger problem. A slow page hurts everyone. Accessibility issues hurt specific users badly.</p>
<h2 id="finding-the-performance-bottleneck">Finding the Performance Bottleneck</h2>
<p>I started by looking at the network waterfall in Chrome DevTools. The landing page had scroll-triggered fade-in animations on four components:</p>
<ul>
<li>FAQ accordion animations</li>
<li>Feature section reveals</li>
<li>Sample review fade-ins</li>
<li>Social proof staggered animations</li>
</ul>
<p>All of them used <strong>Framer Motion</strong>.</p>
<p>Framer Motion is a great library. The API is clean, the animations are buttery smooth, and it handles complex gesture interactions beautifully. But it&#39;s also ~50-60KB of JavaScript that has to load, parse, and execute before the page becomes interactive.</p>
<p>That&#39;s 50-60KB on the critical path. For a landing page where first impressions matter, that&#39;s expensive.</p>
<h2 id="the-trade-off-i-didnt-mean-to-make">The Trade-off I Didn&#39;t Mean to Make</h2>
<p>When I originally built these animations, I chose Framer Motion because it was <strong>easy</strong>. The code looked like this:</p>
<pre><code class="language-tsx">&lt;motion.div
  initial={{ opacity: 0, y: 24 }}
  whileInView={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.5 }}
&gt;
  {content}
&lt;/motion.div&gt;
</code></pre>
<p>Three props, done. The animation worked perfectly.</p>
<p>But I didn&#39;t think about what that convenience cost. Every component that imported <code>motion</code> pulled in the entire Framer Motion runtime. Even though I was only using simple fade-ins, I was shipping interpolation engines, spring physics solvers, and gesture recognizers.</p>
<p>For the dashboard where users are already logged in and engaged, that trade-off might be fine. For the landing page where I have three seconds to make an impression, it wasn&#39;t.</p>
<h2 id="the-fix-css-animations--intersection-observer">The Fix: CSS Animations + Intersection Observer</h2>
<p>The solution was to replace Framer Motion with native browser APIs: CSS transitions and Intersection Observer.</p>
<h3 id="step-1-build-a-lightweight-hook">Step 1: Build a Lightweight Hook</h3>
<p>I created <code>useAnimateInView</code>, a 30-line React hook that watches when an element enters the viewport:</p>
<pre><code class="language-typescript">export function useAnimateInView&lt;T extends HTMLElement = HTMLDivElement&gt;(
  options: UseAnimateInViewOptions = {}
) {
  const { threshold = 0.1, rootMargin = &quot;-50px&quot;, once = true } = options;
  const ref = useRef&lt;T&gt;(null);
  const [isInView, setIsInView] = useState(false);

  useEffect(() =&gt; {
    const element = ref.current;
    if (!element) return;

    const observer = new IntersectionObserver(
      ([entry]) =&gt; {
        if (entry.isIntersecting) {
          setIsInView(true);
          if (once) observer.unobserve(element);
        } else if (!once) {
          setIsInView(false);
        }
      },
      { threshold, rootMargin }
    );

    observer.observe(element);
    return () =&gt; observer.disconnect();
  }, [threshold, rootMargin, once]);

  return { ref, isInView };
}
</code></pre>
<p>Intersection Observer is a native browser API. No library needed. It triggers a callback when an element crosses a viewport threshold, which is exactly what scroll-triggered animations need.</p>
<h3 id="step-2-add-css-animation-classes">Step 2: Add CSS Animation Classes</h3>
<p>In <code>globals.css</code>, I defined the animation states:</p>
<pre><code class="language-css">.animate-in-view {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.animate-in-view.in-view {
  opacity: 1;
  transform: translateY(0);
}

/* Staggered delays for sequential reveals */
.animate-delay-1 { transition-delay: 0.1s; }
.animate-delay-2 { transition-delay: 0.2s; }
.animate-delay-3 { transition-delay: 0.3s; }
</code></pre>
<p>CSS transitions are handled by the browser&#39;s compositor thread. They don&#39;t block the main JavaScript thread, and they work even before JavaScript finishes loading.</p>
<h3 id="step-3-refactor-the-components">Step 3: Refactor the Components</h3>
<p>The component code changed from this:</p>
<pre><code class="language-tsx">&lt;motion.div
  initial={{ opacity: 0, y: 24 }}
  whileInView={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.5 }}
&gt;
  {content}
&lt;/motion.div&gt;
</code></pre>
<p>To this:</p>
<pre><code class="language-tsx">const { ref, isInView } = useAnimateInView();

&lt;div
  ref={ref}
  className={`animate-in-view ${isInView ? &#39;in-view&#39; : &#39;&#39;}`}
&gt;
  {content}
&lt;/div&gt;
</code></pre>
<p>Same visual result. No external library. 50KB lighter.</p>
<h3 id="the-accordion-problem">The Accordion Problem</h3>
<p>The FAQ accordion was trickier. Animating <code>height: auto</code> in CSS is notoriously difficult because you can&#39;t transition to an unknown value. Framer Motion handled this elegantly by measuring the content and interpolating the height.</p>
<p>I solved it with the <strong>CSS Grid trick</strong>:</p>
<pre><code class="language-css">.accordion-content {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.2s ease-out;
}

.accordion-content.open {
  grid-template-rows: 1fr;
}

.accordion-content &gt; div {
  overflow: hidden;
}
</code></pre>
<p>CSS Grid&#39;s <code>fr</code> unit represents a fraction of available space. Transitioning from <code>0fr</code> to <code>1fr</code> smoothly animates from collapsed to the content&#39;s natural height. No JavaScript measurement required.</p>
<h2 id="the-results">The Results</h2>
<p>After removing Framer Motion from the landing page:</p>
<ul>
<li><strong>Performance score: 76 ‚Üí 96</strong></li>
<li><strong>50-60KB less JavaScript</strong> shipped to users</li>
<li><strong>Animations work before JavaScript loads</strong> (better perceived performance)</li>
<li><strong>Reduced main-thread work</strong> during page load</li>
</ul>
<p>The animations look identical. Users can&#39;t tell the difference. But the page loads faster, scores better on Lighthouse, and ranks higher in search engines.</p>
<h2 id="fixing-accessibility-the-80-‚Üí-92-jump">Fixing Accessibility (The 80 ‚Üí 92 Jump)</h2>
<p>With performance handled, I turned to accessibility. Lighthouse flagged six issues:</p>
<h3 id="1-redundant-alt-text">1. Redundant Alt Text</h3>
<p>The logo had <code>alt=&quot;ManuscriptMind&quot;</code> with adjacent text that also said &quot;ManuscriptMind&quot;. Screen readers would announce the name twice.</p>
<p><strong>Fix:</strong> Changed to <code>alt=&quot;&quot;</code> since the text provides the accessible name.</p>
<h3 id="2-links-that-rely-on-color">2. Links That Rely on Color</h3>
<p>Navigation links only changed color on hover. Users with color blindness or low contrast displays couldn&#39;t distinguish them.</p>
<p><strong>Fix:</strong> Added underlines on hover and focus:</p>
<pre><code class="language-tsx">className=&quot;text-slate-600 hover:text-slate-900 hover:underline focus:underline&quot;
</code></pre>
<h3 id="3-small-touch-targets">3. Small Touch Targets</h3>
<p>Carousel dots were 8√ó8px. The Web Content Accessibility Guidelines (WCAG) require a minimum 44√ó44px touch target for mobile users.</p>
<p><strong>Fix:</strong> Added padding around the visual dot to create a larger clickable area:</p>
<pre><code class="language-tsx">&lt;button className=&quot;p-3 -m-2&quot;&gt;
  &lt;span className=&quot;block w-2 h-2 rounded-full ...&quot; /&gt;
&lt;/button&gt;
</code></pre>
<p>The dot still looks small, but the interactive area is 44√ó44px.</p>
<h3 id="4-buttons-without-accessible-names">4. Buttons Without Accessible Names</h3>
<p>Carousel dots had no labels. Screen reader users couldn&#39;t tell what they did.</p>
<p><strong>Fix:</strong> Added ARIA attributes:</p>
<pre><code class="language-tsx">&lt;button
  role=&quot;tab&quot;
  aria-selected={idx === selectedIndex}
  aria-label={`Go to ${feature.title}`}
&gt;
  ...
&lt;/button&gt;
</code></pre>
<h3 id="5-skipped-heading-levels">5. Skipped Heading Levels</h3>
<p>The demo UI mockup used <code>&lt;h4&gt;</code>, <code>&lt;h5&gt;</code>, <code>&lt;h6&gt;</code> inside sections, skipping levels in the document outline. Screen readers use heading hierarchy for navigation.</p>
<p><strong>Fix:</strong> Changed decorative headings to <code>&lt;p&gt;</code> elements since they weren&#39;t structural.</p>
<h3 id="6-low-contrast-text">6. Low Contrast Text</h3>
<p><code>text-slate-400</code> has a 3.5:1 contrast ratio. WCAG AA requires 4.5:1 for body text.</p>
<p><strong>Fix:</strong> Changed to <code>text-slate-500</code> (4.6:1 contrast).</p>
<p>After these changes, accessibility went from 80 to 92.</p>
<h2 id="why-this-matters">Why This Matters</h2>
<p>Lighthouse scores aren&#39;t just vanity metrics. They correlate with real user outcomes:</p>
<ul>
<li><strong>Performance affects conversions.</strong> Amazon found that every 100ms of latency cost them 1% in sales.</li>
<li><strong>Accessibility is a legal requirement</strong> in many jurisdictions and morally required everywhere.</li>
<li><strong>SEO rankings factor in Core Web Vitals.</strong> Google&#39;s algorithm rewards fast, accessible sites.</li>
</ul>
<p>More importantly, optimizing for Lighthouse forces you to think about the user experience. A blind user navigating with a screen reader deserves the same quality experience as a sighted user with a mouse.</p>
<h2 id="key-takeaways">Key Takeaways</h2>
<ol>
<li><p><strong>Animation libraries have a cost.</strong> Framer Motion is great for complex interactions, but overkill for simple fade-ins. Use CSS when possible.</p>
</li>
<li><p><strong>Intersection Observer is underused.</strong> It&#39;s a native browser API that does exactly what most scroll animation libraries do, with zero bundle size.</p>
</li>
<li><p><strong>The CSS Grid trick solves accordion animations.</strong> Transitioning <code>grid-template-rows</code> from <code>0fr</code> to <code>1fr</code> handles dynamic height without JavaScript.</p>
</li>
<li><p><strong>Accessibility isn&#39;t just alt text.</strong> Contrast ratios, touch targets, heading hierarchy, and ARIA labels all matter.</p>
</li>
<li><p><strong>Test with Lighthouse, but verify with real users.</strong> Scores matter, but real people with real disabilities matter more. Run your site through a screen reader occasionally.</p>
</li>
<li><p><strong>Performance is a feature.</strong> Users feel the difference between a 76 and a 96. They might not know why, but they&#39;ll choose the faster site.</p>
</li>
</ol>
<hr>
<p><em>Optimizing your own Next.js landing page? The biggest wins usually come from removing dependencies, not adding them.</em></p>

                </div>
                
                <div class="post-nav">
                    <a href="../index.html">‚Üê Back to Blog</a>
                </div>
            </article>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; <script>document.write(new Date().getFullYear())</script> Dr. Matt Segar. All rights reserved.</p>
            <p><a href="/sitemap.xml">Sitemap</a> | <a href="/privacy-policy.html">Privacy Policy</a></p>
        </div>
    </footer>

    <!-- External JS file for theme toggle -->
    <script src="../../assets/js/theme-toggle.js"></script>
</body>
</html>